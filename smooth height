class SmoothBox{
    constructor(nodeElement){
        this.$container = nodeElement
        this.$button = this.$container.querySelector('.smooth-btn')
        this.$content = this.$container.querySelector('.smooth-block')
        this.init();
    }
    onResize(){
        if (this.$container.dataset.open === 'true') {
            if (parseInt(this.$content.style.maxHeight) !== this.$content.scrollHeight) {
                this.$content.style.maxHeight = `${ this.$content.scrollHeight }px`
            }
        }
    }
    init(){
        if(this.$content.scrollHeight < 300){
            this.$button.classList.add('d-none')
        }
        this.$button.addEventListener('click', () => {
            if (this.$container.dataset.open !== 'true') {
                this.$container.dataset.open = 'true'
                this.$button.classList.add('active')
                this.$container.classList.add('active')
                this.$button.querySelector('.smooth-btn-text').textContent ="Свернуть"
                this.$content.style.maxHeight = `${ this.$content.scrollHeight }px`
            } else {
                this.$container.dataset.open = 'false'
                this.$content.style.maxHeight = ''
                this.$button.classList.remove('active')
                this.$container.classList.remove('active')
                this.$button.querySelector('.smooth-btn-text').textContent ="Развернуть"
            }
        })
        window.addEventListener('resize', this.onResize())
    }
}
document.addEventListener('DOMContentLoaded', e => {
    document.querySelectorAll('.smooth-wrapper').forEach(item => {
        new SmoothBox(item)
    })
})
